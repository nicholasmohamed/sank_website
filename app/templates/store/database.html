<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Merch Database</title>
</head>
<body>
    <h1>Current Merchandise</h1>

    <form action = "https://sankchewaire.com/update-database" method = "POST">
        <div id = item-container>
        {% for i in range(0, length) %}
            <label>Item Id:</label>
            <input type="text" name="id" value="{{items[i].id}}" readonly></br>

            <label>Item Name:</label>
            <input type="text" name="name" value="{{items[i].name}}"></br>

            <label>Item Price:</label>
            <input type="text" name="price" value="{{items[i].price}}"></br>

            <label>Item Image Source:</label>
            <input type="text" name="imageLink" value="{{items[i].imageLink}}"></br>

            <label>Item Description:</label>
            <input type="text" name="description" value="{{items[i].description}}"></br>

            <label>Available Sizes:</label>
            <!-- Extract sizes -->
            {% set x = [] %}
            {% for size in items[i].sizes %}
            <div style="display: none;">
                {{ x.append(size.size) }}
            </div>
            {% endfor %}
            {% set sizes = x|join(", ") %}
            <input type="text" name="sizes" value="{{ sizes }}"></br>

            <label>Item Quantity:</label>
            <input type="text" name="quantity" value="{{items[i].quantity}}"></br>

            <label>Availability:</label>
            <input type="text" name="isAvailable" value="{{items[i].isAvailable}}"></br>

            <label>Remove:</label>
            <input type="text" name="remove" value="false"></br>
        {% endfor %}
        </div></br></br>
        <input type="button" onclick="addItem()" value="Add">
        <input type = "submit" value = "Submit" />
    </form>
    <script>
        var i = 0;

        function addItem() {
            let template = `
            <br><br>
            <label>Item Id:</label>
            <input type="text" name="id" value="${i}"readonly></br>

            <label>Item Name:</label>
            <input type="text" name="name"></br>

            <label>Item Price:</label>
            <input type="text" name="price"></br>

            <label>Item Image Source:</label>
            <input type="text" name="imageLink"></br>

            <label>Item Description:</label>
            <input type="text" name="description"></br>

            <label>Available Sizes:</label>
            <input type="text" name="sizes"></br>

            <label>Item Quantity:</label>
            <input type="text" name="quantity"></br>

            <label>Availability:</label>
            <input type="text" name="isAvailable"></br>`;

            let container = document.getElementById('item-container');
            let div = document.createElement('div');
            div.innerHTML = template;
            container.appendChild(div);

            i++;
        }
    </script>
</body>
</html>